name: Deploy demo micronaut
run-name: ${{ github.actor }} is deploying demo micronautðŸš€
on:
  workflow_dispatch:
jobs:
  deployment:
    runs-on: 'ubuntu-latest'
    environment: dev
    steps:
      - uses: actions/checkout@v4
      - name: Deploy
        uses: WyriHaximus/github-action-helm3@v3
        with:
          exec: |
            cd '${{ github.workspace }}'
            ls
            helm lint demo-micronaut
            helm template demo-micronaut
            helm upgrade demo-micronaut demo-micronaut/ --values demo-micronaut/values.yaml
          kubeconfig: '${{ secrets.KUBE_CONFIG }}'
          overrule_existing_kubeconfig: "true"
